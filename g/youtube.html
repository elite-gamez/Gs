<html lang="en">

<head>
	<meta charset="UTF-8">
	<style>
		body,
		html {
			margin: 0;
			padding: 0;
			font-family: 'Segoe UI', sans-serif;
			background: #000;
			color: #fff;
			overflow-x: hidden;
		}

		.top-bar {
			position: sticky;
			top: 0;
			display: flex;
			justify-content: space-between;
			align-items: center;
			padding: 10px 20px;
			background: #111;
			border-bottom: 1px solid #222;
			z-index: 100;
		}

		.top-bar h1 {
			color: #ff0000;
			font-size: 1.8rem;
			margin: 0;
		}

		.discord-btn {
			padding: 6px 14px;
			border-radius: 20px;
			background: #7289da;
			color: white;
			text-decoration: none;
			font-size: 0.85rem;
		}

		.discord-btn:hover {
			background: #5b6eae;
		}

		#search-bar {
			display: flex;
			justify-content: center;
			margin: 15px 0;
			position: sticky;
			top: 60px;
			z-index: 90;
		}

		#search-bar input {
			width: 400px;
			padding: 10px 15px;
			border: none;
			border-radius: 25px 0 0 25px;
			font-size: 14px;
			outline: none;
			background: #222;
			color: #fff;
		}

		#search-bar button {
			padding: 10px 20px;
			border: none;
			border-radius: 0 25px 25px 0;
			background: #333;
			color: #fff;
			cursor: pointer;
		}

		#search-bar button:hover {
			background: #555;
		}

		#results {
			display: grid;
			grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
			gap: 15px;
			padding: 0 20px 40px;
		}

		.video-card {
			background: #111;
			border-radius: 10px;
			overflow: hidden;
			cursor: pointer;
			display: flex;
			flex-direction: column;
		}

		.video-card img {
			width: 100%;
			height: 120px;
			object-fit: cover;
			border-radius: 10px 10px 0 0;
		}

		.video-info {
			padding: 8px 10px;
			color: #fff;
			display: flex;
			flex-direction: column;
		}

		.video-info h3 {
			font-size: 0.9rem;
			margin: 0 0 4px 0;
			line-height: 1.1rem;
			color: #fff;
		}

		.video-info p {
			font-size: 0.75rem;
			margin: 0;
			color: #aaa;
		}

		.modal {
			display: none;
			position: fixed;
			z-index: 2000;
			left: 0;
			top: 0;
			width: 100%;
			height: 100%;
			background: rgba(0, 0, 0, 0.9);
			justify-content: center;
			align-items: center;
		}

		.modal-content {
			position: relative;
			width: 90%;
			max-width: 900px;
			background: #111;
			padding: 20px;
			border-radius: 6px;
		}

		.modal iframe {
			width: 100%;
			height: 500px;
			border: none;
			border-radius: 4px;
		}

		.close-btn {
			position: absolute;
			top: 10px;
			right: 20px;
			font-size: 28px;
			color: #fff;
			cursor: pointer;
		}
	</style>
</head>

<body>

	<div class="top-bar">
		<h1>YouTube</h1>
		<a href="https://discord.com/invite/FGK4VBJTyd" target="_blank" class="discord-btn">Join Discord</a>
	</div>

	<div id="search-bar">
		<input id="search" placeholder="Search...">
		<button onclick="searchYouTube()">Search</button>
	</div>

	<div id="results"></div>

	<div class="modal" id="videoModal">
		<div class="modal-content">
			<span class="close-btn" onclick="closeModal()">&times;</span>
			<iframe id="videoPlayer" allow="autoplay; encrypted-media" allowfullscreen></iframe>
		</div>
	</div>

	<script>
		let apiKeys = [
    'AIzaSyCFHE95Fnk8X0lRlWpSuyeoXHeBRQ-RjPw',
    'AIzaSyBs0_UbSzQsAIBWsV01mVGCUOzN26eGW_c',
    'AIzaSyCTmTfQK8Vp8DnRw4XsLkC-T7_a08tHNmk',
    'AIzaSyBAnLAEwYssI3Oe3uaYfdEOPpzs-TVqHoM',
    'AIzaSyBQAZ7-zXoAFYBBDp9Amddor0WAooSjUaM',
    'AIzaSyCXizLEzfyVQESntn97HwtYA3yhxbjDeso',
    'AIzaSyCDhBH2IjpGl6ii_eZJqy7Zfq-On4ma3fQ',
    'AIzaSyDEyAl3D-E70ZQV0yjJ-PI4xyVyVxP8qUo',
    'AIzaSyCUHxtMW6ELdaW9FZXtUmPUH02nfpbsF20'
  ];

  let currentKeyIndex = 0, nextPageToken = '', currentQuery = '';

  async function searchYouTube(loadMore=false){
    const query=document.getElementById("search").value||'Juice WRLD';
    if(!loadMore){document.getElementById("results").innerHTML='';nextPageToken='';}
    currentQuery=query;
    await trySearchWithNextKey(query,loadMore);
  }

  async function trySearchWithNextKey(query,loadMore,attempt=0){
    if(attempt>=apiKeys.length){alert("All API keys exhausted"); return;}
    const key=apiKeys[currentKeyIndex];
    const url=`https://www.googleapis.com/youtube/v3/search?part=snippet&q=${encodeURIComponent(query)}&type=video&key=${key}&maxResults=12&pageToken=${nextPageToken}`;
    try{
      const response=await fetch(url);
      const data=await response.json();
      if(data.error) throw new Error(data.error.message);
      nextPageToken=data.nextPageToken;
      const results=document.getElementById("results");
      data.items.forEach(item=>{
        const videoId=item.id.videoId;
        const title=item.snippet.title;
        const channel=item.snippet.channelTitle;
        const date=new Date(item.snippet.publishedAt).toLocaleDateString();
        const thumbnail=item.snippet.thumbnails.medium.url;
        const card=document.createElement('div');
        card.className='video-card';
        card.innerHTML=`
          <img src="${thumbnail}" alt="${title}">
          <div class="video-info">
            <h3>${title}</h3>
            <p>${channel}</p>
            <p>${date}</p>
          </div>
        `;
        card.onclick=()=>openModal(videoId);
        results.appendChild(card);
      });
    }catch(e){
      currentKeyIndex=(currentKeyIndex+1)%apiKeys.length;
      await trySearchWithNextKey(query,loadMore,attempt+1);
    }
  }

  function openModal(videoId){
    const modal=document.getElementById("videoModal");
    const iframe=document.getElementById("videoPlayer");
    iframe.src=`https://www.youtube.com/embed/${videoId}?autoplay=1&enablejsapi=1&rel=0&modestbranding=1`;
    modal.style.display="flex";
  }

  function closeModal(){
    const modal=document.getElementById("videoModal");
    const iframe=document.getElementById("videoPlayer");
    modal.style.display="none";
    iframe.src="";
  }

  window.onclick=event=>{if(event.target===document.getElementById("videoModal")) closeModal();}
  window.onscroll=()=>{if(window.innerHeight+window.scrollY>=document.body.offsetHeight-100) searchYouTube(true);}
  window.onload=()=>searchYouTube();
	</script>

</body>

</html>